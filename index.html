<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MC Maranatha - Keuken</title>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<style>
body {
    font-family: Arial, sans-serif;
    background: #111;
    color: white;
    padding: 30px;
}

h1 {
    color: rgb(255,215,0);
}

#orderCount {
    font-size: 18px;
    margin-bottom: 20px;
}

.order {
    padding: 20px;
    margin: 10px 0;
    border-radius: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    opacity: 1;
    transition: background 1s, opacity 0.5s;
}

.order-info {
    max-width: 70%;
}

button {
    background: #da291c;
    color: rgb(255,215,0);
    border: none;
    padding: 8px 15px;
    border-radius: 15px;
    cursor: pointer;
}
button:hover {
    background: #b2221a;
}

/* Animatie voor nieuwe bestelling */
@keyframes highlightOrder {
    0% { opacity: 0.5; transform: scale(0.95); }
    100% { opacity: 1; transform: scale(1); }
}

.highlight {
    animation: highlightOrder 0.5s ease forwards;
}

/* Kleuren per burger */
.vega { background: #6AA84F; color: white; }
.bb { background: #FFD966; color: black; }
.diet { background: #93C47D; color: white; }
.bigmarco { background: #E06666; color: white; }
.fire { background: #F6B26B; color: black; }
.elsylvano { background: #8E7CC3; color: white; }
.alfa { background: #FFD700; color: black; }
.nuggies { background: #FF9900; color: black; }
.ccc { background: #FFCC99; color: black; }
.mcminion { background: #99CCFF; color: black; }
</style>
</head>
<body>

<h1>üçî Keuken Monitor</h1>
<div id="orderCount">Aantal openstaande bestellingen: 0</div>
<div id="orders"></div>

<script>
const firebaseConfig = { 
  apiKey : "AIzaSyA--6-0cX6qPdUwV0NllkgtAhpm2_SDdJ4" , 
  authDomain : "mcmaranatha-9b500.firebaseapp.com" , 
  databaseURL : "https://mcmaranatha-9b500-default-rtdb.europe-west1.firebasedatabase.app" , 
  projectId : "mcmaranatha-9b500" , 
  storageBucket : "mcmaranatha-9b500.firebasestorage.app" , 
  messagingSenderId : "305909078179" , 
  appId : "1:305909078179:web:165a92a8abb81ccb0a4716" 
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const ordersDiv = document.getElementById("orders");
const orderCountDiv = document.getElementById("orderCount");

// Geluid voor nieuwe bestelling
const audio = new Audio('ding.mp3'); // Plaats dit bestand in dezelfde map

// Kleur per burger
function getBurgerClass(item) {
    switch(item) {
        case "Vega Burger": return "vega";
        case "Basic Burger / BB": return "bb";
        case "Diet Big Mac": return "diet";
        case "Big Marco": return "bigmarco";
        case "Fire of the Spirit Burger": return "fire";
        case "El Sylvano Grande": return "elsylvano";
        case "Alfa Omega Burger": return "alfa";
        case "The Power of de Nuggies Tower": return "nuggies";
        case "CCC (Christian Crispy Chicken)": return "ccc";
        case "McMinion": return "mcminion";
        default: return "";
    }
}

// Update teller
function updateOrderCount() {
    const count = ordersDiv.childElementCount;
    orderCountDiv.innerText = `Aantal openstaande bestellingen: ${count}`;
}

// Nieuwe bestelling
db.ref("orders").on("child_added", (snapshot) => {
    const data = snapshot.val();
    const key = snapshot.key;

    audio.play();

    const div = document.createElement("div");
    div.className = "order highlight " + getBurgerClass(data.item);
    div.id = key;

    let extra = "";
    if(data.item === "CCC (Christian Crispy Chicken)" && data.saus) {
        extra = `<br><strong>Saus:</strong> ${Array.isArray(data.saus) ? data.saus.join(", ") : data.saus}`;
    }

    div.innerHTML = `
        <div class="order-info">
            <strong>${data.item}</strong><br>
            <em>Naam: ${data.naam}</em>
            ${extra}<br>
            ${new Date(data.tijd).toLocaleTimeString()}
        </div>
        <button onclick="completeOrder('${key}')">Klaar</button>
    `;

    ordersDiv.appendChild(div);
    updateOrderCount();

    setTimeout(() => {
        div.classList.remove("highlight");
    }, 500);
});

// Bestelling afronden
function completeOrder(orderKey) {
    db.ref("orders/" + orderKey).remove();
    const elem = document.getElementById(orderKey);
    if(elem) elem.remove();
    updateOrderCount();
}
</script>

</body>
</html>
